<html>
<head>
<title>Search.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #999999; font-weight: normal; font-style: normal; }
.s0 { color: rgb(0,0,0); }
.s1 { color: rgb(0,0,128); font-weight: bold; }
.s2 { color: rgb(0,128,0); font-weight: bold; }
.s3 { color: rgb(0,0,255); }
.s4 { color: rgb(128,128,128); font-style: italic; }
</style>
</head>
<BODY BGCOLOR="#ffffff">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
Search.js</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">$(</span><span class="s1">function </span><span class="s0">() { 
    $(</span><span class="s2">'a[href=&quot;#search&quot;]'</span><span class="s0">).on(</span><span class="s2">'click'</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(event) { 
        event.preventDefault(); 
        $(</span><span class="s2">'#search'</span><span class="s0">).addClass(</span><span class="s2">'open'</span><span class="s0">); 
        $(</span><span class="s2">'#search &gt; form &gt; input[type=&quot;search&quot;]'</span><span class="s0">).focus(); 
    }); 
 
    $(</span><span class="s2">'#search, #search button.close'</span><span class="s0">).on(</span><span class="s2">'click keyup'</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(event) { 
        </span><span class="s1">if </span><span class="s0">(event.target == </span><span class="s1">this </span><span class="s0">|| event.target.className == </span><span class="s2">'close' </span><span class="s0">|| event.keyCode == </span><span class="s3">27</span><span class="s0">) { 
            $(</span><span class="s1">this</span><span class="s0">).removeClass(</span><span class="s2">'open'</span><span class="s0">); 
        } 
    }); 
}); 
 
</span><span class="s1">function </span><span class="s0">fillSearchInput(index,tempArray){ 
    </span><span class="s1">var </span><span class="s0">assignVal=document.getElementById(</span><span class="s2">&quot;searchinput&quot;</span><span class="s0">); 
    </span><span class="s1">var </span><span class="s0">hiddenVal=document.getElementById(</span><span class="s2">&quot;hiddenInput&quot;</span><span class="s0">); 
    </span><span class="s1">if</span><span class="s0">(tempArray[index]._source.vType===vertexType.PAPER){ 
        assignVal.value=tempArray[index]._source.title; 
        hiddenVal.value=vertexType.PAPER; 
        document.getElementById(</span><span class="s2">&quot;searchRes&quot;</span><span class="s0">).focus(); 
    }</span><span class="s1">else if</span><span class="s0">(tempArray[index]._source.vType===vertexType.AUTHOR){ 
        assignVal.value=tempArray[index]._source.author; 
        hiddenVal.value=vertexType.AUTHOR; 
        document.getElementById(</span><span class="s2">&quot;searchRes&quot;</span><span class="s0">).focus(); 
    }</span><span class="s1">else if</span><span class="s0">(tempArray[index]._source.vType===vertexType.ORG){ 
        assignVal.value=tempArray[index]._source.org; 
        hiddenVal.value=vertexType.ORG; 
    }</span><span class="s1">else if</span><span class="s0">(tempArray[index]._source.vType===vertexType.FOS){ 
        assignVal.value=tempArray[index]._source.fos; 
        hiddenVal.value=vertexType.FOS; 
        document.getElementById(</span><span class="s2">&quot;searchRes&quot;</span><span class="s0">).focus(); 
    }</span><span class="s1">else if</span><span class="s0">(tempArray[index]._source.vType===vertexType.PUBLICATION){ 
        assignVal.value=tempArray[index]._source.publisher; 
        hiddenVal.value=vertexType.PUBLICATION; 
        document.getElementById(</span><span class="s2">&quot;searchRes&quot;</span><span class="s0">).focus(); 
    } 
} 
 
</span><span class="s1">function </span><span class="s0">fillSuggestion() { 
 
    </span><span class="s1">var </span><span class="s0">suggestionData=</span><span class="s1">new </span><span class="s0">Array(); 
    </span><span class="s1">var </span><span class="s0">val=document.getElementById(</span><span class="s2">&quot;searchinput&quot;</span><span class="s0">).value; 
    </span><span class="s1">var </span><span class="s0">urlSuggestion=</span><span class="s2">&quot;http://localhost:9200/janusgraph_vertexes/_search?q=&quot;</span><span class="s0">+val+</span><span class="s2">&quot;&amp;size=10&quot;</span><span class="s0">; 
    d3.json(urlSuggestion, </span><span class="s1">function </span><span class="s0">(error, json) { 
        </span><span class="s1">if </span><span class="s0">(error) </span><span class="s1">throw </span><span class="s0">error; 
 
        suggestionData=json.hits.hits; 
        </span><span class="s4">// console.log(suggestionData)</span><span class="s0"> 
        $(</span><span class="s2">'#suggestionBox'</span><span class="s0">).html(</span><span class="s2">''</span><span class="s0">); 
 
        </span><span class="s1">for</span><span class="s0">(</span><span class="s1">var </span><span class="s0">i=</span><span class="s3">0</span><span class="s0">;i&lt;suggestionData.length;i++){ 
 
            </span><span class="s1">var </span><span class="s0">sBox=document.getElementById(</span><span class="s2">&quot;suggestionBox&quot;</span><span class="s0">); 
            </span><span class="s1">var </span><span class="s0">li=document.createElement(</span><span class="s2">&quot;li&quot;</span><span class="s0">); 
            </span><span class="s1">var </span><span class="s0">a=document.createElement(</span><span class="s2">&quot;a&quot;</span><span class="s0">); 
            a.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">,</span><span class="s2">&quot;aTag&quot;</span><span class="s0">); 
            </span><span class="s1">if</span><span class="s0">(suggestionData[i]._source.vType===vertexType.PAPER){ 
                aTag=sBox.appendChild(a); 
 
                li.setAttribute(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;suggestedItem&quot;</span><span class="s0">); 
                li.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">,i); 
                li.innerText=suggestionData[i]._source.title ; 
                a.onclick=</span><span class="s1">function </span><span class="s0">(d) { 
                    fillSearchInput(d.path[</span><span class="s3">1</span><span class="s0">].getAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">),suggestionData); 
                    $(</span><span class="s2">'#suggestionBox'</span><span class="s0">).html(</span><span class="s2">''</span><span class="s0">); 
                } 
                liTag=aTag.appendChild(li); 
                pTag=document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                pTag.innerText=</span><span class="s2">&quot;in paper &quot;</span><span class="s0">; 
                pTag_handler=liTag.appendChild(pTag); 
                citationTag=document.createElement(</span><span class="s2">&quot;bold&quot;</span><span class="s0">); 
                citationTag.innerText=</span><span class="s2">&quot;Citation : &quot;</span><span class="s0">; 
                spanCitationTag=document.createElement(</span><span class="s2">&quot;span&quot;</span><span class="s0">); 
                spanCitationTag.innerText=suggestionData[i]._source.citationCount; 
 
                pTag_handler.appendChild(citationTag); 
                pTag_handler.appendChild(spanCitationTag); 
 
            }</span><span class="s1">else if</span><span class="s0">(suggestionData[i]._source.vType===vertexType.AUTHOR){ 
                aTag=sBox.appendChild(a); 
                li.setAttribute(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;suggestedItem&quot;</span><span class="s0">); 
                li.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">,i); 
                li.innerText=suggestionData[i]._source.author; 
                a.onclick=</span><span class="s1">function </span><span class="s0">(d) { 
                    fillSearchInput(d.path[</span><span class="s3">1</span><span class="s0">].getAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">),suggestionData); 
                    $(</span><span class="s2">'#suggestionBox'</span><span class="s0">).html(</span><span class="s2">''</span><span class="s0">); 
                } 
                liTag=aTag.appendChild(li) 
                pTag=document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                pTag.innerText=</span><span class="s2">&quot;in author&quot;</span><span class="s0"> 
                liTag.appendChild(pTag); 
 
            }</span><span class="s1">else if</span><span class="s0">(suggestionData[i]._source.vType===vertexType.ORG){ 
                aTag=sBox.appendChild(a); 
                li.setAttribute(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;suggestedItem&quot;</span><span class="s0">); 
                li.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">,i); 
                li.innerText=suggestionData[i]._source.org ; 
                a.onclick=</span><span class="s1">function </span><span class="s0">(d) { 
                    fillSearchInput(d.path[</span><span class="s3">1</span><span class="s0">].getAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">),suggestionData); 
                    $(</span><span class="s2">'#suggestionBox'</span><span class="s0">).html(</span><span class="s2">''</span><span class="s0">); 
                } 
                liTag=aTag.appendChild(li) 
                pTag=document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                pTag.innerText=</span><span class="s2">&quot;in Organisation&quot;</span><span class="s0"> 
                liTag.appendChild(pTag); 
 
            }</span><span class="s1">else if</span><span class="s0">(suggestionData[i]._source.vType===vertexType.FOS){ 
                aTag=sBox.appendChild(a); 
                li.setAttribute(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;suggestedItem&quot;</span><span class="s0">); 
                li.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">,i); 
                li.innerText=suggestionData[i]._source.fos; 
                a.onclick=</span><span class="s1">function </span><span class="s0">(d) { 
                    fillSearchInput(d.path[</span><span class="s3">1</span><span class="s0">].getAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">),suggestionData); 
                    $(</span><span class="s2">'#suggestionBox'</span><span class="s0">).html(</span><span class="s2">''</span><span class="s0">); 
                } 
                liTag=aTag.appendChild(li) 
                pTag=document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                pTag.innerText=</span><span class="s2">&quot;in Field of study&quot;</span><span class="s0"> 
                liTag.appendChild(pTag); 
 
            }</span><span class="s1">else if</span><span class="s0">(suggestionData[i]._source.vType===vertexType.PUBLICATION){ 
                aTag=sBox.appendChild(a); 
                li.setAttribute(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;suggestedItem&quot;</span><span class="s0">); 
                li.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">,i); 
                li.innerText=suggestionData[i]._source.publisher; 
                a.onclick=</span><span class="s1">function </span><span class="s0">(d) { 
                    fillSearchInput(d.path[</span><span class="s3">1</span><span class="s0">].getAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">),suggestionData); 
                    $(</span><span class="s2">'#suggestionBox'</span><span class="s0">).html(</span><span class="s2">''</span><span class="s0">); 
                } 
                liTag=aTag.appendChild(li) 
                pTag=document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                pTag.innerText=</span><span class="s2">&quot;in publication&quot;</span><span class="s0"> 
                liTag.appendChild(pTag); 
            } 
        } 
    }); 
 
} 
 
</span><span class="s1">function </span><span class="s0">submitIfEnter(event) { 
        </span><span class="s1">if </span><span class="s0">(event.keyCode === </span><span class="s3">13</span><span class="s0">) { 
            event.preventDefault(); 
            </span><span class="s1">var </span><span class="s0">userEnteredtext=document.getElementById(</span><span class="s2">&quot;searchinput&quot;</span><span class="s0">).value; 
            </span><span class="s1">var </span><span class="s0">typeOfVertex=document.getElementById(</span><span class="s2">&quot;hiddenInput&quot;</span><span class="s0">).value; 
            </span><span class="s1">if</span><span class="s0">(!(userEnteredtext.length&gt;</span><span class="s3">0</span><span class="s0">)){ 
 
                alert(</span><span class="s2">&quot;please enter value&quot;</span><span class="s0">); 
                event.preventDefault(); 
                $(</span><span class="s2">'#search'</span><span class="s0">).addClass(</span><span class="s2">'open'</span><span class="s0">); 
                $(</span><span class="s2">'#search &gt; form &gt; input[type=&quot;search&quot;]'</span><span class="s0">).focus(); 
            }</span><span class="s1">else</span><span class="s0">{ 
                window.location.href=</span><span class="s2">&quot;scholarlyResult.html?value=&quot;</span><span class="s0">+userEnteredtext+</span><span class="s2">&quot;&amp;type=&quot;</span><span class="s0">+typeOfVertex; 
            } 
        } 
} 
 
 
</span><span class="s4">//verifies if search field is not empty, and redirects to scholarlyResult.html</span><span class="s0"> 
$(</span><span class="s2">&quot;#searchRes&quot;</span><span class="s0">).click(</span><span class="s1">function</span><span class="s0">(){ 
    </span><span class="s1">var </span><span class="s0">userEnteredtext=document.getElementById(</span><span class="s2">&quot;searchinput&quot;</span><span class="s0">).value; 
    </span><span class="s1">var </span><span class="s0">typeOfVertex=document.getElementById(</span><span class="s2">&quot;hiddenInput&quot;</span><span class="s0">).value; 
    </span><span class="s1">if</span><span class="s0">(!(userEnteredtext.length&gt;</span><span class="s3">0</span><span class="s0">)){ 
 
        alert(</span><span class="s2">&quot;please enter value&quot;</span><span class="s0">); 
        event.preventDefault(); 
        $(</span><span class="s2">'#search'</span><span class="s0">).addClass(</span><span class="s2">'open'</span><span class="s0">); 
        $(</span><span class="s2">'#search &gt; form &gt; input[type=&quot;search&quot;]'</span><span class="s0">).focus(); 
    }</span><span class="s1">else</span><span class="s0">{ 
        window.location.href=</span><span class="s2">&quot;scholarlyResult.html?value=&quot;</span><span class="s0">+userEnteredtext+</span><span class="s2">&quot;&amp;type=&quot;</span><span class="s0">+typeOfVertex; 
    } 
}); 
 
 
</span><span class="s1">function </span><span class="s0">searchClicked(userEnteredtext,chosenType) { 
    </span><span class="s1">var </span><span class="s0">searchData=</span><span class="s1">new </span><span class="s0">Array(); 
    document.getElementById(</span><span class="s2">&quot;overlay&quot;</span><span class="s0">).style.display=</span><span class="s2">&quot;block&quot;</span><span class="s0">; 
    $(</span><span class="s2">'#search'</span><span class="s0">).removeClass(</span><span class="s2">'open'</span><span class="s0">); 
    </span><span class="s4">//Pagination code</span><span class="s0"> 
    </span><span class="s1">if</span><span class="s0">(chosenType!=</span><span class="s2">&quot;&quot;</span><span class="s0">){ 
        </span><span class="s1">var </span><span class="s0">url=</span><span class="s2">&quot;http://localhost:9200/janusgraph_vertexes/_search?q=vType:&quot;</span><span class="s0">+chosenType+</span><span class="s2">&quot; AND &quot;</span><span class="s0">+userEnteredtext+</span><span class="s2">&quot;&amp;from=0&amp;size=5&quot;</span><span class="s0">; 
        </span><span class="s4">//http://localhost:9200/janusgraph_vertexes/_search?q=vType:paper AND relational data&amp;from=50&amp;size=500</span><span class="s0"> 
    }</span><span class="s1">else</span><span class="s0">{ 
        </span><span class="s1">var </span><span class="s0">url=</span><span class="s2">&quot;http://localhost:9200/janusgraph_vertexes/_search?q=&quot;</span><span class="s0">+userEnteredtext+</span><span class="s2">&quot;&amp;from=0&amp;size=5&quot;</span><span class="s0">; 
 
    } 
 
    d3.json(url, </span><span class="s1">function </span><span class="s0">(error, json) { 
        </span><span class="s1">if </span><span class="s0">(error) </span><span class="s1">throw </span><span class="s0">error; 
        </span><span class="s1">if</span><span class="s0">(json.hits.hits.length==</span><span class="s3">0</span><span class="s0">){ 
            searchtextfield = document.getElementById(</span><span class="s2">&quot;searchText&quot;</span><span class="s0">); 
            searchtextfield.innerText = userEnteredtext; 
            document.getElementById(</span><span class="s2">&quot;resultCount&quot;</span><span class="s0">).innerText=</span><span class="s3">0</span><span class="s0">; 
            </span><span class="s1">var </span><span class="s0">doc = document.getElementById(</span><span class="s2">&quot;searchResults&quot;</span><span class="s0">); 
 
            </span><span class="s1">var </span><span class="s0">tr = document.createElement(</span><span class="s2">&quot;tr&quot;</span><span class="s0">); 
            </span><span class="s1">var </span><span class="s0">td = document.createElement(</span><span class="s2">&quot;td&quot;</span><span class="s0">); 
            boldHeader = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
            boldHeader.innerText=</span><span class="s2">&quot;No search results found&quot;</span><span class="s0">; 
            td.appendChild(boldHeader); 
            tr.appendChild(td); 
            doc.appendChild(tr); 
            document.getElementById(</span><span class="s2">&quot;overlay&quot;</span><span class="s0">).style.display = </span><span class="s2">&quot;none&quot;</span><span class="s0">; 
        } 
        </span><span class="s1">else </span><span class="s0">{ 
            </span><span class="s1">var </span><span class="s0">totalHits; 
            </span><span class="s1">var </span><span class="s0">timeTaken; 
            </span><span class="s4">//searchData = json.hits.hits;</span><span class="s0"> 
            searchtextfield = document.getElementById(</span><span class="s2">&quot;searchText&quot;</span><span class="s0">); 
            searchtextfield.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">,</span><span class="s2">&quot;hits&quot;</span><span class="s0">) 
            searchtextfield.innerText = userEnteredtext; 
 
            </span><span class="s4">//Pagination code</span><span class="s0"> 
            $(document).ready(</span><span class="s1">function </span><span class="s0">() { 
                $(</span><span class="s2">'[data-toggle=&quot;tooltip&quot;]'</span><span class="s0">).tooltip(); 
 
                </span><span class="s1">var </span><span class="s0">$pagination = $(</span><span class="s2">'#pagination'</span><span class="s0">), 
                    totalRecords = </span><span class="s3">0</span><span class="s0">, 
                    records = [], 
                    displayRecords = [], 
                    recPerPage = </span><span class="s3">5</span><span class="s0">, 
                    page = </span><span class="s3">1</span><span class="s0">, 
                    totalPages = </span><span class="s3">0</span><span class="s0">; 
 
                </span><span class="s4">//records = searchData;</span><span class="s0"> 
                totalRecords = json.hits.total; 
                totalPages = Math.ceil(totalRecords / recPerPage); 
                apply_pagination(); 
 
 
                </span><span class="s1">function </span><span class="s0">generate_table() { 
                    $(</span><span class="s2">'#searchResults'</span><span class="s0">).html(</span><span class="s2">''</span><span class="s0">); 
 
                    </span><span class="s1">var </span><span class="s0">doc = document.getElementById(</span><span class="s2">&quot;searchResults&quot;</span><span class="s0">); 
                    </span><span class="s1">var </span><span class="s0">tr_hits=document.createElement(</span><span class="s2">&quot;tr&quot;</span><span class="s0">); 
                    </span><span class="s1">var </span><span class="s0">td_hits=document.createElement(</span><span class="s2">&quot;td&quot;</span><span class="s0">); 
                    td_hits.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">,</span><span class="s2">&quot;hits&quot;</span><span class="s0">); 
                    p_hits=document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                    p_hits.innerText=</span><span class="s2">&quot;Results found &quot; </span><span class="s0">+totalRecords+</span><span class="s2">&quot; in &quot;</span><span class="s0">+timeTaken+ </span><span class="s2">&quot; ms&quot;</span><span class="s0">; 
                    tdHandler=td_hits.appendChild(p_hits); 
 
                    tr_hits.appendChild(td_hits); 
                    doc.appendChild(tr_hits); 
 
                    </span><span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s0">i = </span><span class="s3">0</span><span class="s0">; i &lt; displayRecords.length; i++) { 
                        </span><span class="s1">var </span><span class="s0">tr = document.createElement(</span><span class="s2">&quot;tr&quot;</span><span class="s0">); 
                        </span><span class="s1">var </span><span class="s0">td = document.createElement(</span><span class="s2">&quot;td&quot;</span><span class="s0">); 
                        </span><span class="s1">if </span><span class="s0">(displayRecords[i]._source.vType === vertexType.PAPER) { 
                            a = document.createElement(</span><span class="s2">&quot;a&quot;</span><span class="s0">); 
                            a.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">, displayRecords[i]._id); 
                            a.style.cursor=</span><span class="s2">&quot;pointer&quot;</span><span class="s0">; 
                            a.onclick = </span><span class="s1">function </span><span class="s0">(d) { 
                                poplateClickedNode(d.path[</span><span class="s3">1</span><span class="s0">].getAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">), searchData); 
                            }; 
                            a.setAttribute(</span><span class="s2">&quot;data-toggle&quot;</span><span class="s0">,</span><span class="s2">&quot;tooltip&quot;</span><span class="s0">); 
                            a.setAttribute(</span><span class="s2">&quot;title&quot;</span><span class="s0">,displayRecords[i]._source.title); 
                            linebreak = document.createElement(</span><span class="s2">&quot;br&quot;</span><span class="s0">); 
                            boldHeader = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            handler_a = td.appendChild(a); 
                            </span><span class="s1">if</span><span class="s0">(displayRecords[i]._source.title.length&gt;</span><span class="s3">100</span><span class="s0">){ 
                                boldHeader.innerText = displayRecords[i]._source.title.slice(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">110</span><span class="s0">)+</span><span class="s2">&quot;...&quot;</span><span class="s0">; 
                            }</span><span class="s1">else</span><span class="s0">{ 
                                boldHeader.innerText = displayRecords[i]._source.title 
                            } 
                            handler_a.appendChild(boldHeader); 
 
 
 
                            p = document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                            handler_p = td.appendChild(p); </span><span class="s4">//change to doc to keep citation and reference count out of &quot;a&quot; tag</span><span class="s0"> 
                           </span><span class="s4">/* b = document.createElement(&quot;b&quot;); 
                            b.innerText = &quot;Citation Count :  &quot;; 
                            span = document.createElement(&quot;span&quot;); 
                            span.innerText = displayRecords[i]._source.citationCount; 
                            handler_p.appendChild(b); 
                            handler_p.appendChild(span);*/</span><span class="s0"> 
 
                            b1 = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            b1.innerText = </span><span class="s2">&quot; Year of publication : &quot;</span><span class="s0">; 
                            span1 = document.createElement(</span><span class="s2">&quot;span&quot;</span><span class="s0">); 
                            span1.innerText = displayRecords[i]._source.year; 
                            handler_p.appendChild(b1); 
                            handler_p.appendChild(span1); 
                            td.appendChild(linebreak); 
                        } </span><span class="s1">else if </span><span class="s0">(displayRecords[i]._source.vType === vertexType.AUTHOR) { 
                            a = document.createElement(</span><span class="s2">&quot;a&quot;</span><span class="s0">); 
                            a.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">, displayRecords[i]._id); 
                            a.style.cursor=</span><span class="s2">&quot;pointer&quot;</span><span class="s0">; 
                            a.onclick = </span><span class="s1">function </span><span class="s0">(d) { 
                                poplateClickedNode(d.path[</span><span class="s3">1</span><span class="s0">].getAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">), searchData); 
                            } 
                            linebreak = document.createElement(</span><span class="s2">&quot;br&quot;</span><span class="s0">); 
                            boldHeader = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            handler_a = td.appendChild(a); 
                            boldHeader.innerText = displayRecords[i]._source.author; 
                            handler_a.appendChild(boldHeader); 
 
                            p = document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                            handler_p = td.appendChild(p); </span><span class="s4">//change to doc to keep citation and reference count out of &quot;a&quot; tag</span><span class="s0"> 
                            b = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            b.innerText = </span><span class="s2">&quot;Affiliation :  &quot;</span><span class="s0">; 
                            span = document.createElement(</span><span class="s2">&quot;span&quot;</span><span class="s0">); 
                            span.innerText = displayRecords[i]._source.orgList; 
                            handler_p.appendChild(b); 
                            handler_p.appendChild(span); 
 
                            td.appendChild(linebreak); 
                        } </span><span class="s1">else if </span><span class="s0">(displayRecords[i]._source.vType === vertexType.ORG) { 
                            a = document.createElement(</span><span class="s2">&quot;a&quot;</span><span class="s0">); 
                            a.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">, displayRecords[i]._id); 
                            a.click = </span><span class="s1">function </span><span class="s0">(d) { 
                                poplateClickedNode(d.path[</span><span class="s3">1</span><span class="s0">].getAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">), searchData); 
                            }; 
                            linebreak = document.createElement(</span><span class="s2">&quot;br&quot;</span><span class="s0">); 
                            boldHeader = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            handler_a = td.appendChild(a); 
                            boldHeader.innerText = displayRecords[i]._source.org; 
                            handler_a.appendChild(boldHeader); 
 
                            p = document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                            handler_p = td.appendChild(p); </span><span class="s4">//change to doc to keep citation and reference count out of &quot;a&quot; tag</span><span class="s0"> 
                            b = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            b.innerText = </span><span class="s2">&quot; &quot;</span><span class="s0">; 
                            span = document.createElement(</span><span class="s2">&quot;span&quot;</span><span class="s0">); 
                            span.innerText = </span><span class="s2">&quot; &quot;</span><span class="s0">; 
                            handler_p.appendChild(b); 
                            handler_p.appendChild(span); 
 
                            td.appendChild(linebreak); 
                        }</span><span class="s1">else if </span><span class="s0">(displayRecords[i]._source.vType === vertexType.PUBLICATION) { 
                            a = document.createElement(</span><span class="s2">&quot;a&quot;</span><span class="s0">); 
                            a.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">, displayRecords[i]._id); 
                            a.style.cursor=</span><span class="s2">&quot;pointer&quot;</span><span class="s0">; 
                            a.onclick = </span><span class="s1">function </span><span class="s0">(d) { 
                                poplateClickedNode(d.path[</span><span class="s3">1</span><span class="s0">].getAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">), searchData); 
                            }; 
                            linebreak = document.createElement(</span><span class="s2">&quot;br&quot;</span><span class="s0">); 
                            boldHeader = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            handler_a = td.appendChild(a); 
                            boldHeader.innerText = displayRecords[i]._source.publisher; 
                            handler_a.appendChild(boldHeader); 
 
                            p = document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                            handler_p = td.appendChild(p); </span><span class="s4">//change to doc to keep citation and reference count out of &quot;a&quot; tag</span><span class="s0"> 
                            b = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            b.innerText = </span><span class="s2">&quot; &quot;</span><span class="s0">; 
                            span = document.createElement(</span><span class="s2">&quot;span&quot;</span><span class="s0">); 
                            span.innerText = </span><span class="s2">&quot; &quot;</span><span class="s0">; 
                            handler_p.appendChild(b); 
                            handler_p.appendChild(span); 
 
                            td.appendChild(linebreak); 
                        }</span><span class="s1">else if </span><span class="s0">(displayRecords[i]._source.vType === vertexType.FOS) { 
                            a = document.createElement(</span><span class="s2">&quot;a&quot;</span><span class="s0">); 
                            a.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">, displayRecords[i]._id); 
                            a.style.cursor=</span><span class="s2">&quot;pointer&quot;</span><span class="s0">; 
                            a.onclick = </span><span class="s1">function </span><span class="s0">(d) { 
                                poplateClickedNode(d.path[</span><span class="s3">1</span><span class="s0">].getAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">), searchData); 
                            } 
                            linebreak = document.createElement(</span><span class="s2">&quot;br&quot;</span><span class="s0">); 
                            boldHeader = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            handler_a = td.appendChild(a); 
                            boldHeader.innerText = displayRecords[i]._source.fos; 
                            handler_a.appendChild(boldHeader); 
 
                            p = document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                            handler_p = td.appendChild(p); </span><span class="s4">//change to doc to keep citation and reference count out of &quot;a&quot; tag</span><span class="s0"> 
                            b = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            b.innerText = </span><span class="s2">&quot; &quot;</span><span class="s0">; 
                            span = document.createElement(</span><span class="s2">&quot;span&quot;</span><span class="s0">); 
                            span.innerText = </span><span class="s2">&quot; &quot;</span><span class="s0">; 
                            handler_p.appendChild(b); 
                            handler_p.appendChild(span); 
 
                            td.appendChild(linebreak); 
                        }</span><span class="s1">else if </span><span class="s0">(displayRecords[i]._source.vType === vertexType.VENUE) { 
                            a = document.createElement(</span><span class="s2">&quot;a&quot;</span><span class="s0">); 
                            a.setAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">, displayRecords[i]._id); 
                            a.style.cursor=</span><span class="s2">&quot;pointer&quot;</span><span class="s0">; 
                            a.onclick = </span><span class="s1">function </span><span class="s0">(d) { 
                                poplateClickedNode(d.path[</span><span class="s3">1</span><span class="s0">].getAttribute(</span><span class="s2">&quot;id&quot;</span><span class="s0">), searchData); 
                            } 
                            linebreak = document.createElement(</span><span class="s2">&quot;br&quot;</span><span class="s0">); 
                            boldHeader = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            handler_a = td.appendChild(a); 
                            boldHeader.innerText = displayRecords[i]._source.venue; 
                            handler_a.appendChild(boldHeader); 
 
                            p = document.createElement(</span><span class="s2">&quot;p&quot;</span><span class="s0">); 
                            handler_p = td.appendChild(p); </span><span class="s4">//change to doc to keep citation and reference count out of &quot;a&quot; tag</span><span class="s0"> 
                            b = document.createElement(</span><span class="s2">&quot;b&quot;</span><span class="s0">); 
                            b.innerText = </span><span class="s2">&quot; &quot;</span><span class="s0">; 
                            span = document.createElement(</span><span class="s2">&quot;span&quot;</span><span class="s0">); 
                            span.innerText = </span><span class="s2">&quot; &quot;</span><span class="s0">; 
                            handler_p.appendChild(b); 
                            handler_p.appendChild(span); 
 
                            td.appendChild(linebreak); 
                        } 
                        tr.appendChild(td); 
                        doc.appendChild(tr); 
                    } 
 
                    document.getElementById(</span><span class="s2">&quot;overlay&quot;</span><span class="s0">).style.display = </span><span class="s2">&quot;none&quot;</span><span class="s0">; 
                } 
 
                </span><span class="s4">//calculates start and end indices and sends set of records to display</span><span class="s0"> 
                </span><span class="s1">function </span><span class="s0">apply_pagination() { 
                    $pagination.twbsPagination({ 
                        totalPages: totalPages, 
                        visiblePages: </span><span class="s3">5</span><span class="s0">, 
                        onPageClick: </span><span class="s1">function </span><span class="s0">(event, page) { 
                            displayRecordsIndex = Math.max(page - </span><span class="s3">1</span><span class="s0">, </span><span class="s3">0</span><span class="s0">) * recPerPage; 
 
                                </span><span class="s1">if</span><span class="s0">(chosenType!=</span><span class="s2">&quot;&quot;</span><span class="s0">){ 
                                    </span><span class="s1">var </span><span class="s0">url=</span><span class="s2">&quot;http://localhost:9200/janusgraph_vertexes/_search?q=vType:&quot;</span><span class="s0">+chosenType+</span><span class="s2">&quot; AND &quot;</span><span class="s0">+userEnteredtext+</span><span class="s2">&quot;&amp;from=&quot;</span><span class="s0">+displayRecordsIndex+</span><span class="s2">&quot;&amp;size=5&quot;</span><span class="s0">; 
                                }</span><span class="s1">else</span><span class="s0">{ 
                                    </span><span class="s1">var </span><span class="s0">url=</span><span class="s2">&quot;http://localhost:9200/janusgraph_vertexes/_search?q=&quot;</span><span class="s0">+userEnteredtext+</span><span class="s2">&quot;&amp;from=&quot;</span><span class="s0">+displayRecordsIndex+</span><span class="s2">&quot;&amp;size=5&quot;</span><span class="s0">; 
 
                                } 
                                d3.json(url, </span><span class="s1">function </span><span class="s0">(error, jsonrangeResult) { 
                                    </span><span class="s1">if </span><span class="s0">(error) </span><span class="s1">throw </span><span class="s0">error; 
                                    records=jsonrangeResult.hits.hits; 
                                    searchData=records; 
                                    totalHits=jsonrangeResult.hits.total; 
                                    timeTaken=jsonrangeResult.took; 
                                   </span><span class="s4">//Array.prototype.push.apply(records,rangeValues);</span><span class="s0"> 
                                    displayRecords = records; 
                                    generate_table(); 
                                }); 
                        } 
                    }); 
                } 
            }); 
        } 
    }); 
 
} 
 
</span></pre>
</body>
</html>